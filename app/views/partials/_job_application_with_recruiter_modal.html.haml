.modal{ id: "job-apply-#{job.id}"}
  .modal-lg.job_application_model.without-registration_modal
    .modal-content
      .modal-header
        %h2#myModalLabel.modal-title
          %h4.modal-title Job Application - #{truncate(job.title,length: 30)}
        %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"}
          Ã—
            
      .modal-body
        = form_for [:static , job,job_application], html: {class: 'form-horizontal'} do |f|
          = hidden_field_tag 'candidate_id', candidate_id if local_assigns[:candidate_id].present?
          = hidden_field_tag 'is_candidate', is_candidate if local_assigns[:is_candidate].present?
          = hidden_field_tag 'candidate_with_recruiter', :value=>true

          .form-group.candidate-association
            .row
              .col-sm-6
                %label.d-block Resume
                .file_selector{style: "display: flex;"}
                  .form-group.d-inline-block
                    = f.filepicker_field :applicant_resume , class: 'btn btn-primary file-pick'  , id: 'accept-filepiker' ,onchange: 'display_file_name(event)',"data-fp-extensions" => ".pdf,.doc,.docx,.txt"
                  %p.d-inline-block.uploaded_file_name  No File Selected
              = f.fields_for :candidate_with_recruiter do |b|
                .col-sm-6
                  %label Email
                  .form-group
                    = b.text_field :email,placeholder: "Email",class: 'form-control input'
                .col-sm-6
                  %label First Name
                  .form-group
                    = b.text_field :first_name,placeholder: "First Name",class: 'form-control input'
                .col-sm-6
                  %label Last Name
                  .form-group
                    = b.text_field :last_name,placeholder: "Last Name",class: 'form-control input'
                .col-sm-6
                  %label Phone
                  .form-group
                    = b.text_field :phone,placeholder: "Phone",class: 'form-control input'
                -#.col-sm-6
                -#  %label Visa
                -#  .form-group
                -#    = b.text_field :visa,placeholder: "Visa",class: 'form-control input'
                -#.col-sm-6
                -#  %label Title
                -#  .form-group
                -#    = b.text_field :title,placeholder: "Title",class: 'form-control input'
                -#.col-sm-6
                -#  %label Role
                -#  .form-group
                -#    = b.text_field :roal, placeholder: "Role",class: 'form-control input'
                .col-sm-6
                  %label Recruiter Email
                  .form-group
                    = b.text_field :recruiter_email,placeholder: "Recruiter Email",class: 'form-control input'
              -#= render 'static/jobs/job_application_attributes', f: f

            .row
              .col-sm-12
                .form-group
                  %p Cover Letter
                  =  f.text_area :cover_letter , class: "form-control tinymce", rows: 8, cols: 25, placeholder: 'Cover Letter'
                  =  tinymce :default
            .row
              .col-sm-12
                .form-group
                  %p Message (optional)
                  = f.text_area :message, class: "form-control", rows: "2" ,placeholder: 'Write tour message'
    

          %fieldset
            / .form-group
            /   %label.col-md-2.control-label Cover Letter
            /   .col-md-10
            /     =  f.text_area :cover_letter , class: "form-control tinymce", rows: 8, cols: 25, placeholder: 'Cover Letter'
            /     =  tinymce :default
            / .form-group
            /   %label.col-md-2.control-label Resume
            /   .col-md-10
            /     = f.filepicker_field :applicant_resume , class: 'btn btn-primary file-pick'  , id: 'accept-filepiker' ,"data-fp-extensions" => ".pdf,.doc,.docx,.txt"
            / .form-group
            /   %label.col-md-2.control-label Message (optional)
            /   .col-md-10
            /     = f.text_area :message, class: "form-control", rows: "2" ,placeholder: 'Write tour message'
            .nested-fields
              - job.job_requirements.each do |r|
                = f.fields_for :job_applicant_reqs do |ja|
                  = ja.hidden_field :job_requirement_id,value: r.id
                  .form-group
                    %label.col-md-12.control-label #{r.questions}
                    .col-md-12
                      - if r.ans_type == "Free Text"
                        = ja.text_field  :applicant_ans,class: "form-control",required: r.ans_mandatroy
                      - elsif r.ans_type == "Multiple Answer"
                        - s=r.multiple_option
                        - s.gsub!('mytext=', ' ').gsub!('&','')
                        - opt_array = s.split(" ")
                        - if r.multiple_ans
                          -opt_array.each do |a|
                            = ja.check_box :app_multi_ans, {:multiple => true, class: 'set-checkbox d-inline-block'},"#{CGI.unescape(a)}"
                            = ja.label :app_multi_ans, :value => "#{CGI.unescape(a)}", class: "d-inline-block mr-3"
                        - else
                          -opt_array.each do |a|
                            = ja.radio_button :applicant_ans, "#{CGI.unescape(a)}",{class: 'set-checkbox d-inline-block'}
                            = ja.label :applicant_ans, :value => "#{CGI.unescape(a)}", class: "d-inline-block mr-3"
                      - else
                        = ja.filepicker_field :applicant_ans , class: 'btn btn-primary req-file-pick',required: r.ans_mandatroy, id: 'req-accept-filepiker'
            .nested-fields
              = f.fields_for :custom_fields do |custom|
                .form-group
                  %label.col-md-2.control-label #{custom.object.name}
                  .col-md-10
                    = custom.hidden_field  :name , value: custom.object.name
                    = custom.text_field  :value, class: "form-control", placeholder: custom.object.name, required: custom.object.required
          .modal-footer
            %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"}
              Cancel
            = f.button "Save".html_safe , class: 'btn btn-primary' , data: {disable_with: disable_spinning('Saving...')}

