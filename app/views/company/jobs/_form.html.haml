
= form_for @job ,html:{ class:'form-horizontal'} do |f|
  %fieldset
    .row
      .col-md-12
        .form-group
          %label.control-label
            Title
            %sup.text-danger *
          = f.text_field :title , class: 'form-control' , placeholder: 'Enter Job Title' , required: true
    .row
      .col-md-6
        .form-group
          %label.control-label
            Job Location
            %sup.text-danger *
          = f.text_field :location , class: 'form-control' , placeholder: 'Enter Job Location' , required: true
      .col-md-6
        .form-group
          %label.control-label
            Category
            %sup.text-danger *
          .plain-select
            =f.select :job_category, WORK_CATEGORIES,{include_blank: true},{class: "form-control", required: true }
    .row
      .col-md-6
        .form-group
          %label.control-label
            Industry
            %sup.text-danger *
          .plain-select
            =f.select :industry, industry_list, {include_blank: true},{class: "form-control", required: true }
      .col-md-6
        .form-group
          %label.control-label
            Department
            %sup.text-danger *
          .plain-select
            =f.select :department, department_list, {include_blank: true},{class: "form-control", required: true }
    .row
      .col-md-6
        .form-group
          %label.control-label
            Start Date
            %sup.text-danger *
          = f.text_field :start_date , class: 'form-control' , placeholder: 'Enter Start Date' , required: true
      .col-md-6
        .form-group
          %label.control-label
            End Date
          = f.text_field :end_date , class: 'form-control' , placeholder: 'Enter End Date'
    .row
      .col-md-6
        .form-group
          %label.control-label
            Price
            %sup.text-danger *
          = f.text_field :price , class: 'form-control' , placeholder: 'Rate' , required: true
      .col-md-6
        .form-group
          %label.control-label
            Job Type
            %sup.text-danger *
          = f.select :job_type, ["Full Time", "Part Time", "Contract"], class: 'form-control' , placeholder: 'Enter End Date' , required: true
    .row
      .col-md-6
        .form-group
          .video-file
            .videp-btn
              = f.file_field :video_file , class: 'form-control'
            %span.file-text
            %p.note
              %strong
                Note
              Please choose a video shorter than 120 seconds and smaller than 50MB
      .col-md-6
        .form-group
          %label.control-label
            - if @job.comp_video.present?
              = button_tag "<i class='fa fa-check'> Added video</i>".html_safe , class: 'btn btn-primary btn-lg', id: 'added_company_video', type: "button"
              = button_tag "<i class='fa fa-times'></i>".html_safe , class: 'btn btn-primary btn-lg', id: 'remove_company_video', type: "button"
            -else
              = button_tag "Company Video" , class: 'btn btn-primary btn-lg', id: 'company_video', type: "button"
            = f.hidden_field :comp_video , class: 'form-control'
            %span.file-text
    .row
      .col-md-12
        .form-group
          %label.control-label Description
          =  f.text_area :description , class: 'form-control',:class => "tinymce", :rows => 6, :cols => 60, placeholder: 'Enter Job Details and Qualification'
    .row
      .col-md-12
        .form-group
          %labelcontrol-label
            Educations
            %sup.text-danger
          = f.text_field :education_list , class: 'form-control tagsinput','data-role'=>'tagsinput' , placeholder: 'Educations and Certification' , value: @job.education_list.join(", ")
          %p.note
            %strong Note:
            Education are separated with comma
    .row
      .col-md-12
        .form-group
          %labelcontrol-label
            Skill
            %sup.text-danger
          = f.text_field :tag_list , class: 'form-control tagsinput','data-role'=>'tagsinput' , placeholder: 'Skill are separated with comma' , value: @job.tag_list.join(", ")
          %p.note
            %strong Note:
            Skill are separated with comma
    .row
      .col-md-12
        .form-group
          %label.checkbox.control-label Should we keep this job public ?
          =f.check_box :is_public
          %p.note
            %strong Note:
            If checked, We will show this job to all candidates in your system and will be posted on etyme. So anyone can apply. To control job applications by invitations only, Please make this private.
    .row
      .col-md-12
        .form-group
          =f.fields_for :custom_fields do |custom_field|
            = render 'company/jobs/partials/custom_fields', f: custom_field
        %strong
          .links.col-sm-12
            -#= link_to_add_association '+ Add Custom Field', f, :custom_fields, class: 'text-info pull-right', partial: 'company/jobs/partials/custom_fields'
            %br/
  .form-actions
    .row
      .col-md-12
        = button_tag 'Cancel' , class: 'btn btn-default' , "data-dismiss"=> "modal"
        = f.button "Submit".html_safe, class: 'btn btn-primary' , data: {disable_with: disable_spinning('Submitting...')}

- content_for :scripts do
  :javascript
    // DO NOT REMOVE : GLOBAL FUNCTIONS!
    $(document).ready(function() {
      pageSetUp();
      // Job End Date
      $( document ).on("click", "#company_video", function(){
        $('#job_comp_video').val("#{current_company.video}");
        $('#company_video').after("<button name='button' type='button' class='btn btn-primary btn-lg' id='remove_company_video'><i class='fa fa-times'></i></button>");
        $('#company_video').after("<button name='button' type='button' class='btn btn-primary btn-lg' id='added_company_video'><i class='fa fa-check'> Added video</i></button>");
        $('#company_video').remove();
      });

      $( document ).on("click", "#remove_company_video", function(){
        $('#job_comp_video').val("");
        $('#remove_company_video').after("<button name='button' type='button' class='btn btn-primary btn-lg' id='company_video'>Company Video</button>");
        $('#remove_company_video').remove();
        $('#added_company_video').remove();
      });

      $('#job_end_date , #job_start_date').datepicker({
        dateFormat : 'mm/dd/yy',
        prevText : '<i class="fa fa-chevron-left"></i>',
        nextText : '<i class="fa fa-chevron-right"></i>',
      });

      //job_video_file
      $(document).on('change', '#job_video_file',  function () {
          $(this).parent('.videp-btn').siblings('span').text($(this).val().replace(/([^\\]*\\)*/,''))
      });
    });

%script{:src => "https://maps.google.com/maps/api/js?key=AIzaSyDk4kWlA522W3T4oGwdug5nKPXYMhU6rCE&sensor=false&libraries=places"}
:javascript
    var input = document.getElementById('job_location');
    google.maps.event.addDomListener(window, 'load', function () {
      var places = new google.maps.places.Autocomplete(input);
      google.maps.event.addListener(places, 'place_changed', function () {
        var place = places.getPlace();
      });
    });

    google.maps.event.addDomListener(input, 'keydown', function(event) {
      if (event.keyCode === 13) {
        event.preventDefault();
      }
    });