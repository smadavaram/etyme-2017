<table id="jobs_datatable" class="table text-center table-bordered table-lg table-v2 table-striped dataTable no-footer" data-class="Scaffolding::Thing">
  <thead>
  <tr>
    <th width="30%;">Name</th>
    <th>Skills</th>
    <th>Location</th>
    <th>Visa</th>
    <th>Recruiter</th>
    <th>Action</th>
  </tr>
  </thead>
  <tbody>
    
    <% @job_applications.each do |application| %>
      <% candidate = application.applicationable %>
      <tr data-id="<%= application.id %>">
        <% if application.user.present? %>
          <!-- <td>
            <%#= link_to user_image(application.user, style: 'width: 35px; height: 35px;', class: 'data-table-image mr-2',title: "#{application.try(:user).try(:full_name)}" ), job_application_path(application)%>
          </td> -->
          <td class="no-wrap pr-5">
            <%= user_image(application.applicationable, style: 'width: 35px; height: 35px;', class: 'data-table-image mr-1',title: "#{application.applicationable.try(:full_name)}" ) %>
            <%= link_to(do_ellipsis(application.applicationable.try(:full_name),13), public_profile_static_candidates_path(application.applicationable), class: 'data-table-font candidate-name') %>
            <hr style="margin-top:-23px; visibility:hidden;"/>
            <span style="margin-left:33px; font-size: 0.80em;">
              <%= contact_widget(candidate.email, candidate.phone, candidate, chat_link: chat_link(candidate,application&.conversation&.id),color: '#3E4B5B; !important') %>
            </span>
          </td>
          <td>
            <% application.user.skills.each do |skill| %>
              <span class="badge-success badge"><%= skill.name %></span>
            <% end %>
          </td>
          <td><%= application.user.try(:location) %></td>
          <td><%= application.user.visa %></td>
          <td>
            <% application.user.companies.each do |company| %>
              <span class="badge-info badge mb-5"><%= company.name %></span>
            <% end %>
          </td>
          <td class="no-wrap">
            <%= link_to(content_tag(:i, nil, class: 'fa fa-eye').html_safe, job_application_path(application), title: 'View Detail', class: 'data-table-icons') %>
            <%= link_to(content_tag(:i, nil, class: 'picons-thin-icon-thin-0014_notebook_paper_todo').html_safe, candidate_add_reminder_path(application.applicationable_id), remote: :true, title: "Remind Me", class: 'data-table-icons') %>
            <%= link_to(content_tag(:i, nil, class: 'picons-thin-icon-thin-0122_download_file_computer_drive').html_safe, application&.applicant_resume || candidate.candidates_resumes.first&.resume, target: "_blank", download: true, title: "Download Resume", class: 'data-table-icons') %>
            <%= link_to(content_tag(:i, nil, class: 'icon-feather-user-plus').html_safe, make_company_candidate_path(application.applicationable), method: :post, title: 'Add to candidates', class: 'data-table-icons') %>
          </td>

        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<style type="text/css">
  .candidate-name{
    float: left;
    width: 120px;
  }
</style>