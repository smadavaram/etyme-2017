#content
  %section#widget-grid
    .row
      %article.col-xs-12.col-sm-12.col-md-12.col-lg-12.sortable-grid.ui-sortable
        #wid-id-1.jarviswidget.jarviswidget-color-blueDark.jarviswidget-sortable{"data-widget-editbutton" => "false", :role => "widget"}
          %header{:role => "heading"}
            %span.widget-icon
              %i.fa.fa-table
            %h2 Prefer Vendors
          / widget div
          %div{:role => "content"}
            .jarviswidget-editbox
            .widget-body.no-padding
              #datatable_fixed_column_wrapper.dataTables_wrapper.form-inline.dt-bootstrap.no-footer
                -#.dt-toolbar
                  .col-xs-12.col-sm-6.hidden-xs
                    #datatable_fixed_column_filter.dataTables_filter
                      %label
                        %span.input-group-addon{style: "background-color:#eee;"}
                          %i.glyphicon.glyphicon-search
                        %input.form-control{"aria-controls" => "datatable_fixed_column", :placeholder => "", :type => "search"}/
                  .col-sm-6.col-xs-12.hidden-xs
                    .toolbar
                      .text-right
                %table#datatable_fixed_column.table.table-striped.table-bordered.dataTable.no-footer{"aria-describedby" => "datatable_fixed_column_info", :role => "grid", :style => "width: 100%;", :width => "100%"}
                  %thead
                    %tr{:role => "row"}
                      %th.hasinput{ :style => "width:10%"}
                        %input.form-control{:placeholder => "Pic", :type => "text"}/
                      %th.hasinput{ :style => "width:10%"}
                        .input-group
                          %input.form-control{:placeholder => "Name", :type => "text"}/
                      %th.hasinput{ :style => "width:10%"}
                        %input.form-control{:placeholder => "Owner", :type => "text"}/
                      %th.hasinput{ :style => "width:10%"}
                        %input.form-control{:placeholder => "Owner Email", :type => "text"}/
                      %th.hasinput{ :style => "width:10%"}
                        %input.form-control{:placeholder => "Domain", :type => "text"}/
                      %th.hasinput{ :style => "width:10%"}
                        %input.form-control{:placeholder => "Phone", :type => "text"}/
                      %th.hasinput{ :style => "width:10%"}
                        %input.form-control{:placeholder => "Actions", :type => "text"}/
                    %tr{:role => "row"}
                      %th.expand.sorting_asc Pic
                      %th.sorting{} Name
                      %th.sorting{} Owner
                      %th.sorting{} Owner Email
                      %th.sorting{} Domain
                      %th.sorting{} Phone
                      %th.sorting{} Actions
                  %tbody
                    - @network.each_with_index  do |d|
                      %tr.even{:role => "row"}
                        - if d.prefer_vendor ==current_company
                          %td= image_tag show_recipient_picture(d.company.try(:logo)) , alt: '', width: '40'
                          %td= link_to d.company.name ,profile_company_path(d.company)
                          %td= d.company.owner.full_name  rescue "  --"
                          %td= d.company.owner.try(:email) rescue "  --"
                          %td= d.company.domain rescue "  --"
                          %td= d.company.phone rescue "  --"
                          %td= link_to 'HOT Candidates', company_company_hot_candidates_path(d.company) , class: 'btn btn-xs btn-danger btn-Danger' ,title:"Show Hot Candidates of  #{d.company.name}"
                        -elsif d.company == current_company
                          %td= image_tag show_recipient_picture(d.prefer_vendor.try(:logo)) , alt: '', width: '40'
                          %td= link_to d.prefer_vendor.name ,profile_company_path(d.prefer_vendor)
                          %td= d.prefer_vendor.owner.full_name  rescue "  --"
                          %td= d.prefer_vendor.owner.try(:email) rescue "  --"
                          %td= d.prefer_vendor.domain rescue "  --"
                          %td= d.prefer_vendor.phone rescue "  --"
                          %td
                            = link_to 'HOT Candidates', company_company_hot_candidates_path(d.prefer_vendor) , class: 'btn btn-xs btn-danger btn-Danger' ,title:"Show Hot Candidates of  #{d.prefer_vendor.name}"
                        -#= link_to raw("<i class='fa fa-times '></i>") , company_path(d.invited_company) ,method: :delete, class: 'btn btn-xs btn-default btn-danger' ,title:"Delete #{d.invited_company.name}",data: {confirm: "Are you sure you want to Delete this Company ?", verify: 'Confirm', verify_text: "Type 'Confirm' to Continue"}


:css
  .form-control
  {
    background-color: white !important;
  }

- content_for :modals do
  #job_invitation
  -#= render 'company/companies/partials/new_company'
-content_for :scripts do
  :javascript
    $(document).ready(function() {
     pageSetUp();
      var responsiveHelper_dt_basic = undefined;
      var responsiveHelper_datatable_fixed_column = undefined;
      var responsiveHelper_datatable_col_reorder = undefined;
      var responsiveHelper_datatable_tabletools = undefined;
      var table = $('#example').DataTable();
      var otable = $('#datatable_fixed_column').DataTable({
            "sDom": "<'dt-toolbar'<'col-xs-12 col-sm-6 hidden-xs'f><'col-sm-6 col-xs-12 hidden-xs'<'toolbar'>>r>"+
                    "t"+
                    "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-xs-12 col-sm-6'p>>",
            "autoWidth" : true,
            "oLanguage": {
                "sSearch": '<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>'
            }

        });

      //$("div.toolbar").html('<div class="text-right">#{ button_tag 'NEW' ,class: 'btn btn-success btn-md pull-right header-btn margin-top-5' , "data-toggle": "modal" , "data-target":"#new-job"}</div>');
      // $("div.toolbar").html(#{ button_tag 'NEW' ,class: 'btn btn-success btn-md pull-right header-btn margin-top-5' , "data-toggle": "modal" , "data-target":"#new-job"}'</div>');

      // Apply the filter
      $("#datatable_fixed_column thead th input[type=text]").on( 'keyup change', function () {
        otable
            .column( $(this).parent().index()+':visible' )
            .search( this.value )
            .draw();

      } );

    });
