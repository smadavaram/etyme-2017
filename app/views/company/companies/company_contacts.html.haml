.content-i
  .content-box
    .row
      .col-sm-12
        .element-wrapper
          .element-box-tp
            .controls-above-table
              .row.mr-1.ml-1
                .col-sm-6
                  %a.btn.btn-sm.btn-secondary{ href: "#{new_company_company_path}", title: 'New Contact' } Add Contact
                  %a.btn.btn-sm.btn-secondary{ href: '#', title: 'Add to Group(s)', onclick: 'add_to_groups_modal();' } Add to Group(s)
                .col-sm-6
                  .form-inline.justify-content-sm-end
                    %input.form-control.form-control-sm.rounded.bright{placeholder: "Search", type: "text", type: 'search', id: 'company-contacts-datatable-search'}
                    %button.btn.btn-sm.btn-secondary{type: "button", id: 'company-contacts-datatable-search-btn'} Search
            .table-responsive
              %table#company-contacts-datatable.table.text-center.table-bordered.table-lg.table-v2.table-striped{"data-source" => "#{company_contacts_company_companies_path(format: :json)}"}
                %thead
                  %tr
                    %th= "<input type='checkbox' onclick='selectAll(this);' name='id[]' id='select_all'>".html_safe
                    %th Company
                    %th Name
                    %th Title
                    %th Groups
                    %th Reminder/Note
                    %th Status
                    %th Contact
                    %th Actions
                %tbody


-content_for :scripts do
  :javascript
    $(document).ready(function(){
      default_active_nav('.ln-3');
    });

    function selectAll(obj) {
      var checkBox = document.querySelectorAll('input[name="id[]"]');
      for (i = 0; i < checkBox.length; ++i) {
        checkBox[i].checked = obj.checked;
      }
    };

    function add_to_groups_modal() {
      var array = [];
      var checkBox = document.querySelectorAll('input[name="id[]"]:checked');
      if (checkBox.length == 0)
      {
        flash_info('Please select Contact(s) first!');
        return null;
      }
      $('.remote_container').html("#{ j render 'company/companies/partials/assign_groups_to_contacts_modal' }");
      $('#contacts-groups-modal').modal('toggle');
      $(".select2").select2({placeholder: "Select Group(s)"});
      for (i = 0; i < checkBox.length; ++i) {
        if (checkBox[i].value != 'on') {
          array.push(checkBox[i].value);
        }
      }
      $('#contact_ids').val(array);
    };
