#content
  .row
    .col-sm-12.col-md-12.col-lg-3
      .panel-body.status.profile-margin{style: 'background: #FFF!important;border: 1px solid #ccc;'}
        .text
          %div.profile-hover
            //= f.label :filepicker_url, "Upload Your Avatar:"
            %p.imgDescription.col-sm-offset-4  Change Logo
            %div.pictureContainer.col-md-offset-2
              = filepicker_field_tag "" ,class: "hidden file", onchange:"companyLogoUpload(event)","data-fp-crop-ratio" => "2/2",mimetypes: "image/*"
              -if(current_company.logo.present?)
                = image_tag current_company.logo,  style:"width:100px;height:100px", fit: 'clip',:class =>"profile-pic image-setting"
              -else
                = image_tag image_path('default-lcom-ogo.png'),  style: "width:100px;height:100px", fit: 'clip',:class =>"profile-pic image-setting"

        %ul.links{style: 'background: #FFF!important'}
          %li.col-sm-4.padding-bottom-10
            %i.fa.fa-user.fa-2x.text-muted
              5
          %li.col-sm-4.padding-bottom-10
            %i.fa.fa-file-pdf-o.fa-2x.text-muted
              5
          %li.col-sm-4.padding-bottom-10
            %i.fa.fa-user.fa-2x.text-muted
              5

      .panel-body.status.profile-margin
        .text
          %div.profile-hover
            %p.imgDescription.col-sm-offset-4 Upload Video
            %div.pictureContainer.col-md-offset-2
              = filepicker_field_tag "" ,class: "hidden video-file", onchange:"videoUpload(event)","data-fp-crop-ratio" => "2/2",mimetypes: "video/*"
              -if(current_company.video.present?)
                %video{:controls => "", :width => "200", :height=> "200"}
                  %source{src: "#{current_company.video}",type:"#{current_company.video_type}"}
              -else
                = image_tag image_path('default_user.png'),  style: "width:100px;height:100px", fit: 'clip',:class =>"video-pic"
              = button_tag "Upload Video", fit: 'clip',:class =>"video-pic img1"

    .col-sm-12.col-md-12.col-lg-9
      #wid-id-7.jarviswidget{"data-widget-attstyle" => "jarviswidget-color-teal", "data-widget-custombutton" => "false", "data-widget-editbutton" => "false", "data-widget-fullscreenbutton" => "false", "data-widget-sortable" => "false", :role => "widget", :style => ""}
        %header{:role => "heading"}
          %ul.nav.nav-tabs.pull-left.in#myTab
            %li.active
              %a{"aria-expanded" => "true", "data-toggle" => "tab", :href => "#hr1"}
                %i.fa.fa-lg.fa-building
                %span.hidden-mobile.hidden-tablet Company Info

          %span.jarviswidget-loader
            %i.fa.fa-refresh.fa-spin
        / widget div
        %div{:role => "content"}
          .jarviswidget-editbox

          .widget-body
            .tab-content

              -## Company form TAB
              #hr1.tab-pane.active
                .tabbable.tabs-below
                = render partial: 'company/companies/partials/company_form_html'

#myModal.modal.fade{:role => "dialog"}
  .modal-dialog
    / Modal content
    .modal-content
      .modal-body
        %button.close{"data-dismiss" => "modal", :type => "button"} Ã—
        .row
        .col-md-8
          %p
            %b Are You business Owner or Application Admin?
        .col-md-2
          .form-group
            = radio_button_tag 'is_owner', 'true', false
            = label_tag 'is_owner', 'Yes'
        .col-md-2
          .form-group
            = radio_button_tag 'is_owner', 'false', true
            = label_tag 'is_owner', 'No'
        .not_owner
          = form_for @admin,as: "admin",method: :post do |f|
            .row
              .col-md-12
                .form-group
                  = f.text_field :first_name,:placeholder => "First Name",class: "form-control"
            .row
              .col-md-12
                .form-group
                  = f.text_field :last_name,:placeholder => "Last Name",class: "form-control"
            .row
              .col-md-12
                .form-group
                  = f.email_field :email,:placeholder => "Email",class: "form-control"
            .row
              .col-md-12
                .form-group
                  = f.text_field :phone,:placeholder => "Phone Number",class: "form-control"
            .row
              .col-lg-12
                %button.btn.btn-primary{:type => "submit"}
                  Saved
        .row.owner_doc
          .col-lg-12
            .form-group{ style: "margin: 0"}
            = filepicker_field_tag "" ,class: "hidden domain_file", onchange:"uploadDomainfile(event)"
            = link_to "Upload File" ,"#",class: 'col-lg-12 domain btn btn-md btn-primary', style: "margin-bottom: 10px"

- content_for :scripts do
  :javascript
    $(document).ready(function() {
         $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {
          // localStorage.setItem('activeTab', $(e.target).attr('href'));
          var id = $(e.target).attr("href").substr(1);
          window.location.hash = id;
        });
        var hash = window.location.hash;
        $('#myTab a[href="' + hash + '"]').tab('show');

      $( ".profile-pic,.domain" ).click(function()
      {
        $( ".file" ).trigger( "click" );
        $('.fp__overlay').css({'z-index':'99999'});
      });
      $(".domain").click(function(){
       $( ".domain_file" ).trigger( "click" );
        $('.fp__overlay').css({'z-index':'99999'});
      })
      $( ".video-pic" ).click(function()
      {
        $( ".video-file" ).trigger( "click" );
      });
      $(".best_in_place").best_in_place();
      $(".best_in_place").on('change', function(event) {
          flash_success('Change Saved!');
      });
      $('input:radio[name="same_billing_addr"]').change(function() {
        if ($(this).val() == "true") {
           $(".billing_info").hide();
          }
        else {
           $(".billing_info").show();
          }
      });
      $('input:radio[name="is_owner"]').change(function() {
        if ($(this).val() == "false") {
           $(".owner_doc").hide();
           $(".not_owner").show();
          }
        else {
           $(".owner_doc").show();
           $(".not_owner").hide();
          }
      });
      $('#myModal').on('shown.bs.modal', function() {
          if ($('input:radio[name="is_owner"]').val() == "true") {
             $(".owner_doc").hide();
             $(".not_owner").show();
            }
          else {
             $(".owner_doc").show();
             $(".not_owner").hide();
            }
      });
    });
    function companyLogoUpload(event){
      photo_url = event.fpfile.url
      $('.profile-pic').html('');
      $.ajax({
       type: 'POST',
       dataType: 'json',
       url: "#{update_logo_companies_path}",
       data: { photo: photo_url,authenticity_token: window._token },
       success: function (data) {
        $('.text img').attr("src",photo_url);
         location.reload();
       }
     });
    }
    function uploadDomainfile(event){
      file_url = event.fpfile.url
      $('.domain_file').html('');
      $.ajax({
       type: 'POST',
       url: "#{update_file_companies_path}",
       data: { file: file_url,authenticity_token: window._token },
       success: function (data) {
        $("#myModal").modal("hide");
       }
     });
    }
    function videoUpload(event){
      video_url = event.fpfile.url
      video_type=event.fpfile.mimetype
      $('.video-pic').html('');
      $.ajax({
       type: 'POST',
       dataType: 'json',
       url: "#{update_video_companies_path}",
       data: { video: video_url,authenticity_token: window._token, video_type: video_type },
       success: function (data) {
         location.reload();
       }
     });
    }
    $(".edit_in_line").css("display","none");
    $('td').on('mouseover mouseout',function(){
    $(this).find('.editprofile-pic_in_line').toggle();
    });



