.content-i
  .content-box
    .row
      .col-sm-4
        .user-profile.compact
          .up-head-w{:style => "background-image:url(#{current_user.photo})", class: 'profile-pic'}
            / = image_tag user.photo,  style:"width:100px;height:100px", fit: 'clip',:class =>"profile-pic image-setting"
            .up-social
              -#%a{:href => current_user.twitter_url, target: "_blank"}
              -#  %i.os-icon.os-icon-twitter
              -#%a{:href => current_user.facebook_url, target: "_blank"}
              -#  %i.os-icon.os-icon-facebook
            .up-main-info
              %h2.up-header
                = current_user.full_name
              %h6.up-sub-header
                Product Designer at Facebook
            %svg.decor{:height => "219px", :preserveaspectratio => "xMaxYMax meet", :version => "1.1", :viewbox => "0 0 842 219", :width => "842px", :xmlns => "http://www.w3.org/2000/svg", "xmlns:xlink" => "http://www.w3.org/1999/xlink"}
              %g{:fill => "#FFFFFF", :transform => "translate(-381.000000, -362.000000)"}
                %path.decor-path{:d => "M1223,362 L1223,581 L381,581 C868.912802,575.666667 1149.57947,502.666667 1223,362 Z"}
          .up-controls
            .row
              .col-sm-6
                = link_to candidate_conversations_path, class: "btn btn-success btn-sm" do
                  %i.ti-email
                  %span Contact Me


          .up-contents
            .m-b
              .row.m-b
                .col-sm-6.b-r.b-b
                  .el-tablo.centered.padded-v
                    .value
                      25
                    .label
                      Products Sold
                .col-sm-6.b-b
                  .el-tablo.centered.padded-v
                    .value
                      315
                    .label
                      Friends
              .padded
                .os-progress-bar.primary
                  .bar-labels
                    .bar-label-left
                      %span Email
                    .bar-label-right
                      %span.text-success verified
                .os-progress-bar.primary
                  .bar-labels
                    .bar-label-left
                      %span Phone
                    .bar-label-right
                      %span.text-success
                        -#=current_user.is_number_verify ? 'verified' : 'unverified'
                .os-progress-bar.primary
                  .bar-labels
                    .bar-label-left
                      %span Visa
                    .bar-label-right
                      %span.text-success verified
                .os-progress-bar.primary
                  .bar-labels
                    .bar-label-left
                      %span Identity
                    .bar-label-right
                      %span.text-success verified

        .element-wrapper
          .element-box
            %h4.element-header
              Education
            .element-info.border-0
              .element-info-text
                - current_user.user_educations.each do |edu|
                  .mb-2
                    %h6.element-inner-header.m-0
                      =edu.degree_level
                    .element-inner-desc
                      =edu.degree_title
            %h4.element-header
              Certification
            .element-info.border-0
              .element-info-text
                - current_user.user_certificates.each do |cert|
                  .mb-2
                    %h6.element-inner-header.m-0
                      =cert.title
                    .element-inner-desc
                      =cert.institute
            %h4.element-header
              Skills
            .element-info.border-0
              .element-info-text
                - current_user.skill_list.each do |sl|
                  .badge.badge-primary.p-2.mb-1
                    =sl
      .col-sm-8
        .element-wrapper
          .element-box
            .element-info
              .element-info-with-icon
                .element-info-icon
                  %i.icon-badge
                .element-info-text
                  %h4.element-inner-header
                    Work history
            - if current_user.user_work_clients.present?
              - current_user.user_work_clients.each do |c|
                .element-info
                  .element-info-text
                    .mb-2
                      %div
                        %h5.mb-1.text-primary #{c.name}
                        %span.mb-1.h6.d-block.text-secondary at #{c.industry}
                        %strong.font-weight-bold.font-sm.text-capitalize
                          #{c.start_date&.strftime('%B-%Y')} - #{c.end_date&.strftime('%B-%Y')}
                      .element-inner-desc
                        %P
                          #{c.project_description}
            - else
              .element-info
                .element-info-text
                  .mb-2
                    %div
                      %span.mb-1.h6.d-block.text-secondary There is no work history
                    .element-inner-desc
                      %P
                        = link_to "Add New One", company_user_path(current_user)


- content_for :scripts do
  :javascript
    $(document).ready(function() {

      $( ".profile-pic" ).click(function()
      {
        upload_file_ajax(userLogoUpload);
      });
       $(".best_in_place").best_in_place();
       $(".best_in_place").on('change', function(event) {
          flash_success('Change Saved!');
      });
      $( ".video-pic" ).click(function() {
        upload_file_ajax(usersVideoUpload);
     });
     $( ".resume" ).click(function() {
        $( ".resume_file" ).trigger( "click" );
     });
      $('.p_date').datepicker({
        dateFormat: "yy-mm-dd"
      });
    });
    function userLogoUpload(url,type){
      photo_url = url
      $('.profile-pic').html('');
      $.ajax({
       type: 'POST',
       dataType: 'json',
       url: "#{update_photo_path}",
       data: { photo: photo_url,authenticity_token: window._token },
       success: function (data) {
        $('.text img').attr("src",photo_url);
        location.reload();
       }
     });
    }
    function usersVideoUpload(url,type){
      video_url = url
      video_type=type
      $('.video-pic').html('');
      $.ajax({
       type: 'POST',
       dataType: 'json',
       url: "#{company_user_update_video_path(user_id:current_user.id)}",
       data: { video: video_url,authenticity_token: window._token, video_type: video_type },
       success: function (data) {
         location.reload();
       }
     });
    }
    $.datepicker.setDefaults({
        changeYear: true,
        yearRange: "1900:2016",
        showMonthAfterYear: true,
        showButtonPanel: true,
        showAnim: "fold",
        selectOtherMonths: true,
        autoSize: true,
        dateFormat: "yy-mm-dd"

      });
    $(".edit_in_line").css("display","none");
    $('td').on('mouseover mouseout',function(){
    $(this).find('.editprofile-pic_in_line').toggle();
    });
