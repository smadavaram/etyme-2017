%div
  .widget-body
    %ul#myTab1.nav.nav-tabs.smaller.p-4{style: "border-bottom: 0px;"}
      %li.nav-item.cumstom_nav-tab{class: "#{'active' if @tab == 'received_invoices'}"}
        %a{"data-toggle" => "tab", :href => "#tab-r1", class: "nav-link cumstom_nav-tab display-flex"}
          %span.badge.bg-color-blue.txt-color-white
          Received Invoices
          %span.badge.bg-color-blue.txt-color-white= @receive_invoices.count
      %li.nav-item.cumstom_nav-tab{class: "#{'active in' if @tab == 'sent_invoices'}"}
        %a{"data-toggle" => "tab", :href => "#tab-r2",class: "nav-link cumstom_nav-tab display-flex"}
          %span.badge.bg-color-blue.txt-color-white
          Sent Invoices
          %span.badge.bg-color-blue.txt-color-white= @sent_invoices.count

    .col-md-12
      .tab-content
        #tab-r1.tab-pane.padding-top-15{ class: "#{'active in' if @tab == 'received_invoices'}"  }
          .table-responsive.p-3
            %table.table.table-striped.table-bordered.table-v2.table-lg
              %thead
                %tr{:role => "row"}
                  %th id
                  %th Contract
                  %th Sender
                  %th Created at - Due
                  %th Hours
                  %th Rate
                  %th Total
                  %th Status
                  %th Actions
              %tbody
                -  @receive_invoices.each_with_index do |invoice , index|
                  %tr
                    %td= invoice.id
                    %td= link_to do_ellipsis(invoice.contract.title,15),  company_sell_contract_contract_path(invoice.contract)
                    %td
                      =image_tag(invoice.sender_company.photo, class: 'data-table-image mr-1').html_safe
                      =link_to(do_ellipsis(invoice.sender_company.full_name), profile_company_path(invoice.sender_company), class: 'data-table-font')
                    %td= invoice.start_date.to_s + " - " + invoice.end_date.to_s
                    %td= invoice.total_approve_time
                    %td= invoice.rate
                    %td= invoice.total_approve_time.to_i *  invoice.rate.to_i
                    %td= invoice.status.humanize
                    %td
                      = link_to raw("<i class='fa fa-eye'></i>"), timesheet_check_invoice_path(invoice), remote: true, class: 'data-table-icons',title: "Details"
                      = link_to raw("<i class='fa fa-fax'></i>"), accept_invoice_contract_invoice_path(invoice.contract, invoice), class: 'data-table-icons',title: "Submit Invoice", method: "POST", data: {confirm:  'Are you sure?'} if invoice.pending_invoice?
                      = link_to raw("<i class='fa fa-dollar'></i>"), new_invoice_receive_payment_path(invoice), class: 'data-table-icons',title: "Paid Invoice", data: {confirm:  'Are you sure?'} if invoice.open?
                      = link_to raw("<i class='fa fa-calendar'></i>"), edit_invoice_path( invoice), class: 'data-table-icons',title: "Chnage end date" if invoice.open?
                      =# link_to raw("<i class='fa fa-fax'></i>") , timesheet_check_invoice_path(invoice), target: '_blank', class: 'btn btn-md btn-default btn-primary',title: "Submit Invoice"
            .timesheet_pagination_wrap
              .pagination_label
                = page_entries_info @receive_invoices
              = will_paginate(@receive_invoices, {params: {tab: 'received_invoices'},previous_label: "Previous",next_label: "Next",inner_window: 2,class: 'invoices_pagination_links'})
        #tab-r2.tab-pane.padding-top-15{ class: "#{'active in' if @tab == 'sent_invoices'}" }
          .table-responsive.p-3
            %table.table.table-striped.table-bordered.table-v2.table-lg
              %thead
                %tr{:role => "row"}
                  %th id
                  %th Contract
                  %th Sender
                  %th Created at - Due
                  %th Hours
                  %th Rate
                  %th Total
                  %th Status
                  %th Actions
              %tbody
                -  @sent_invoices.each_with_index do |invoice , index|
                  %tr
                    %td= invoice.id
                    %td= link_to do_ellipsis(invoice.contract.title,15),  company_sell_contract_contract_path(invoice.contract)
                    %td
                      =image_tag(invoice.sender_company.photo, class: 'data-table-image mr-1').html_safe
                      =link_to(do_ellipsis(invoice.sender_company.full_name), profile_company_path(invoice.sender_company), class: 'data-table-font')
                    %td= invoice.start_date.to_s + " - " + invoice.end_date.to_s
                    %td= invoice.total_approve_time
                    %td= invoice.rate
                    %td= invoice.total_approve_time.to_i *  invoice.rate.to_i
                    %td= invoice.status.humanize
                    %td
                      -#= link_to raw("<i class='fa fa-eye'></i>"), timesheet_check_invoice_path(invoice), remote: true, class: 'data-table-icons',title: "Details"
                      = link_to raw("<i class='fa fa-fax'></i>"), accept_invoice_contract_invoice_path(invoice.contract, invoice), class: 'data-table-icons',title: "Submit Invoice", method: "POST", data: {confirm:  'Are you sure?'} if invoice.open?
                      = link_to raw("<i class='fa fa-edit'></i>"), edit_invoice_path( invoice), class: 'data-table-icons',title: "Chnage end date" if invoice.pending_invoice?
                      =# link_to raw("<i class='fa fa-fax'></i>") , timesheet_check_invoice_path(invoice), target: '_blank', class: 'btn btn-md btn-default btn-primary',title: "Submit Invoice"
            .timesheet_pagination_wrap
              .pagination_label
                = page_entries_info @sent_invoices
              = will_paginate(@sent_invoices, {params: {tab: 'sent_invoices'},previous_label: "Previous",next_label: "Next",inner_window: 2,class: 'invoices_pagination_links'})

.modal{id: "invoice-confirmation-model"}
  .modal-dialog
    .modal-content
      .modal-header
        %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"}
          Ã—
        %h4.modal-title
          %strong Invoice Details
      #invoice-confirmation-model-body.modal-body


:css
  .form-control
  {
    background-color: white !important;
  }

- content_for :scripts do
  :javascript
    $(document).ready(function() {
      $(".best_in_place").best_in_place();
      $(".best_in_place").bind("ajax:success", function(){ location.reload() });
    });