.modal#buy_send_documents_modal
  .modal-dialog.modal-lg
    .modal-content
      .modal-header
        %h2#myModalLabel.modal-title
          %strong Buy Send Document
        %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"}
        Ã—
      .modal-body
        = form_for(BuySendDocument.new, as: :document, url: buy_document_create_contracts_path, remote: true) do |esd|
          =esd.hidden_field :buy_contract_id, value: @contract.buy_contract.id
          %fieldset
            .form-row
              .col-md-6
                %label.control-label
                Documents
                .contract-fild.display-flex
                  = render 'shared/file_attachement',f:esd,attr_name: :doc_file,button_name: "Document", name_selector: ".uploaded_file_name",cstm_style: "border-radius: 0; height:38px;"
                  %p.d-inline-block.uploaded_file_name= esd.object&.doc_file.present?  ? File.basename(esd.object.doc_file) : "No File Selected"
                  -#= f.filepicker_field :doc_file, :button_text => "Pick File", disable: true , class: 'file-pick btn btn-primary filepicker-attach filepicker-attach-doc'
                  = esd.hidden_field :file_name, class: "doc-file-name"
                  = esd.hidden_field :file_size, class: "doc-file-size"
                  = esd.hidden_field :file_type, class: "doc-file-type"
              .col-md-6
                .form-group
                  %label.control-label
                    expire date
                  .contract-fild
                    -#= text_field_tag "document[when_expire]", esd.object.when_expire ,id: 'abcd',class: "form-control exp_date_buy",placeholder: "DD/MM/YYYY"
                    = esd.text_field :when_expire, value: '',class: "form-control exp_date_buy", placeholder: "DD/MM/YYYY", id: 'buy_send_docments', :autocomplete => :off
            .form-row
              .col-12
                .form-group
                  %label.control-label
                    = esd.check_box :is_sign_required ,class: "form-control is-require-sign" , placeholder: ""
                    = esd.label :is_sign_required
                    = esd.hidden_field :creatable_type, class: "form-control", value: "Company"
                    = esd.hidden_field :creatable_id, class: "form-control", value: current_company.id
                  .form-group.assign_signable.hidden
                    -esd.object.document_signs.build
                    =esd.fields_for :document_signs do |ds|
                      = link_to_add_fields 'available_tour_fields', esd, :document_signs, {partial: 'company/contracts/contract_document_users_fields'}, {class: 'doc-user-generater hidden'}
                      = ds.select :signable, {}, {}, class: "form-control whois_sign" , placeholder: ""
                  .modal-footer
                    %a.btn.btn-default{"data-dismiss" => "modal", :type => "button"}
                      Cancel
                    = esd.submit 'Save', class: 'btn btn-primary'

- content_for :scripts do
  :javascript
    $(document).ready(function() {
      $( ".file-pick" ).on('click',function() {
      $('.fp__overlay').css({'z-index':'99999'})});
    });

:javascript
    $(document).ready(function() {
        pageSetUp();
        $(".filepicker-attach-doc").on("change", function(e){
          var name = e["originalEvent"]["fpfile"]["filename"];
          var size = e["originalEvent"]["fpfile"]["size"];
          var type = e["originalEvent"]["fpfile"]["mimetype"];

          $(this).siblings(".doc-file-name" ).val(name);
          $(this).siblings( ".doc-file-size" ).val(size);
          $(this).siblings( ".doc-file-type" ).val(type);
        });
      });
    $(".exp_date_buy").datepicker({
      dateFormat : 'dd/mm/yy'
    });
