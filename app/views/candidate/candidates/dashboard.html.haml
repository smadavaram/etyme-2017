/ = javascript_include_tag 'libs/jquery-2.1.1.min.js'

.with-side-panel
  .content-i
    .content-box
      .row
        .col-sm-12
          .row
            .element-wrapper.w-100
              %h6.element-header
                Dashboard
                %a.pull-right.btn.btn-sm.btn-primary.mt-1.mr-1{href: candidate_filter_cards_data_path("month"), "data-remote" => "true"} Month
                %a.pull-right.btn.btn-sm.btn-primary.mt-1.mr-1{href: candidate_filter_cards_data_path("quarter"), "data-remote" => "true"} Quarter
                %a.pull-right.btn.btn-sm.btn-primary.mt-1.mr-1{href: candidate_filter_cards_data_path("year"), "data-remote" => "true"} year
                %input.pull-right.mr-1{id: 'custom_range', plceholder: 'Custom Rage Search', "data-date-format" => "DD/MM/YYYY"}
              .element-content#dashboard_cards
                =render 'candidate/candidates/partials/dashboard_cards', cards: @cards
          .row
            .col-sm-12
              .element-wrapper
                %h6.element-header
                  User Activity
                .timed-activities.compact
                  -candidate_activity_hash.each do |key,value|
                    .timed-activity
                      .ta-date
                        %span
                          = key
                      .ta-record-w
                        - value.each do |activity|
                          = render_activity activity

    .content-panel
      .content-panel-close
        %i.os-icon.os-icon-close
      .element-wrapper
        %h6.element-header
          Quick Links
        .element-box-tp
          .el-buttons-list.full-width
            %a.btn.btn-white.btn-sm{:href => "#"}
              %i.os-icon.os-icon-delivery-box-2
              %span Create New Product
            %a.btn.btn-white.btn-sm{:href => "#"}
              %i.os-icon.os-icon-window-content
              %span Customer Comments
            %a.btn.btn-white.btn-sm{:href => "#"}
              %i.os-icon.os-icon-wallet-loaded
              %span Store Settings

#content.newsfeed
  %body
    %section#widget-grid.clearfix
      .newsfeed-left
        %ul
          - @jobs.each do |job|
            -# if !(Time.parse(job.created_at.to_s) <= Time.parse(Time.now.to_s) && job.job_applications.blank?)
            %li
              = link_to job_candidate_public_job_path(job), remote: true do
                %div.public-job-list.clearfix
                  %span.pull-left
                    =job.id
                  %span.pull-right
                    %i.fa.fa-calendar-o
                    =job.created_at.strftime("%d/%m/%Y")
                %div.job-header.clearfix
                  = image_tag job.company.logo,  style:"width:50px;height:50px", fit: 'clip'
                  %p.job_title
                    = truncate(job.title,length: 50)
                  %p.job_title
                    %i.fa.fa-usd
                    =job.price
                %div.public-job-other-info
                  %span
                    %i.fa.fa-map-marker
                    =job.location
                  %span
                    %i.fa.fa-user
                    =job.created_by.full_name
        = digg_pagination(@jobs)
      .newsfeed-right
        %div#public-job-description

-content_for :body_class, 'greybg'
- content_for :modals do
  #job_application



- content_for :scripts do
  :javascript
    $(document).ready(function() {
      $('#custom_range').daterangepicker({
        startDate: moment().startOf('month'),
        endDate: moment().endOf('month'),
        locale: {
          format: 'DD/MM/YYYY'
        }
      });
      $("#custom_range").change(function(){
        url = "/candidate/filter_data/period?start_date=" + $(this).val().split('-').map(String.trim).join("&end_date=")
        $.get(url);
      });

    });


/ #content
/   .row
/     .col-sm-12.col-md-12.col-lg-3
/       .panel-body.status.profile-margin
/         .text
/           %div.profile-hover
/             %p.imgDescription.col-sm-offset-4 Change Image
/             %div.pictureContainer.col-md-offset-2
/               = filepicker_field_tag "" ,class: "hidden file", onchange:"employeeLogoUpload(event)","data-fp-crop-ratio" => "2/2",mimetypes: "image/*"
/               -if(current_candidate.photo.present?)
/                 = image_tag current_candidate.photo,  style:"width:100px;height:100px", fit: 'clip',:class =>"profile-pic image-setting"

/               -else
/                 = image_tag image_path('default_user.png'),  style: "width:100px;height:100px", fit: 'clip',:class =>"profile-pic image-setting"

/         %ul.links.hidden-sm.hidden-xs
/           %li
/             = filepicker_field_tag "" ,class: "hidden resume_file", onchange:"uploadResume(event)"
/             - if !current_candidate.resume.present?
/               = link_to "Upload CV" ,"#",class: 'resume btn btn-md btn-primary'
/             - else
/               = link_to "Change CV","#",class: 'resume btn btn-md btn-primary'

/           %li
/             %a{:href => "javascript:void(0);"}

/           %li
/             %a{:href => "javascript:void(0);"}



/     .col-sm-12.col-md-12.col-lg-9
/       #wid-id-7.jarviswidget.jarviswidget-color-teal{"data-widget-attstyle" => "jarviswidget-color-teal", "data-widget-custombutton" => "false", "data-widget-editbutton" => "false", "data-widget-fullscreenbutton" => "false", "data-widget-sortable" => "false", :role => "widget", :style => ""}
/         %header{:role => "heading"}
/           %ul.nav.nav-tabs.pull-left.in#myTab
/             %li.active
/               %a{"aria-expanded" => "true", "data-toggle" => "tab", :href => "#hr1"}
/                 %i.fa.fa-lg.fa-info-circle
/                 %span.hidden-mobile.hidden-tablet Basic Info
/             %li
/               %a{"aria-expanded" => "false", "data-toggle" => "tab", :href => "#hr2"}
/                 %i.fa.fa-lg.fa-location-arrow
/                 %span.hidden-mobile.hidden-tablet
/                   Address
/             %li
/               %a{"aria-expanded" => "false", "data-toggle" => "tab", :href => "#hr3"}
/                 %i.fa.fa-lg.fa-graduation-cap
/                 %span.hidden-mobile.hidden-tablet
/                   Educations
/             %li
/               %a{"aria-expanded" => "false", "data-toggle" => "tab", :href => "#hr4"}
/                 %i.fa.fa-black-tie.fa-lg
/                 %span.hidden-mobile.hidden-tablet
/                   Experience
/             %li
/               %a{"aria-expanded" => "false", "data-toggle" => "tab", :href => "#hr5"}
/                 %i.fa.fa-briefcase.fa-lg
/                 %span.hidden-mobile.hidden-tablet
/                   Portfolio
/           %span.jarviswidget-loader
/             %i.fa.fa-refresh.fa-spin
/         / widget div
/         %div{:role => "content"}
/           .jarviswidget-editbox

/           .widget-body
/             .tab-content
/               -## Basic Info form TAB
/               #hr1.tab-pane.active
/                 = link_to 'Add Skills' ,"#",class:'btn btn-primary pull-right margin-bottom-5 margin-right-10',"data-target" => "#skills", "data-toggle" => "modal"
/                 .tabbable.tabs-below
/                   =render partial: 'candidate/candidates/partials/basic_info',locals: {candidate: current_candidate}
/                 = render partial: 'candidate/candidates/partials/skills_modal'

/               -# Locations form TAB
/               #hr2.tab-pane
/                 -#%button.btn.btn-primary{"data-target" => "#myModal", "data-toggle" => "modal"}
/                 -#  Add Location
/                   =#render partial: 'candidate/candidates/partials/location',locals:{address: current_candidate.addresses}

/               #hr3.tab-pane
/                 %button.btn.btn-primary.pull-right.margin-bottom-5.margin-right-10{"data-target" => "#education", "data-toggle" => "modal"}
/                   New
/                 .tabbable.tabs-below
/                   = render partial: 'candidate/educations/partials/education_detail',locals: {user: current_candidate}
/                 = render partial: 'candidate/educations/partials/form' ,locals: {user: current_candidate}
/               #hr4.tab-pane
/                 %button.btn.btn-primary.pull-right.margin-bottom-5.margin-right-10{"data-target" => "#experience", "data-toggle" => "modal"}
/                   New
/                 .tabbable.tabs-below
/                   = render partial: 'candidate/experiences/partials/experience_detail',locals: {user: current_candidate}
/                 = render partial: 'candidate/experiences/partials/form' ,locals: {user: current_candidate}
/               #hr5.tab-pane
/                 %button.btn.btn-primary.pull-right.margin-bottom-5.margin-right-10{"data-target" => "#add-portfolio", "data-toggle" => "modal"}
/                   New
/                 .tabbable.tabs-below
/                   = render partial: 'candidate/portfolios/partials/portfolio',locals: {user: current_candidate}
/ - content_for :modals do
/   = render partial: 'candidate/portfolios/partials/form_modal'




/ - content_for :scripts do
/   :javascript

/     $(document).ready(function() {

/       $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {
/             // localStorage.setItem('activeTab', $(e.target).attr('href'));
/             var id = $(e.target).attr("href").substr(1);
/             window.location.hash = id;
/           });
/         var hash = window.location.hash;
/         $('#myTab a[href="' + hash + '"]').tab('show');

/       $( ".profile-pic" ).click(function()
/       {
/         $( ".file" ).trigger( "click" );
/       });

/       $('.resume').on("click",function(){

/           $(".resume_file").trigger("click");

/       });
/       $( '.file-portfolio' ).on('click',function() {
/         $('.fp__overlay').css({'z-index':'99999'});

/      });


/        $(".best_in_place").best_in_place();
/        $(".best_in_place").on('change', function(event) {
/           flash_success('Change Saved!');
/       });
/       $('#education_start_year').datepicker({
/         dateFormat : 'dd/mm/yy'
/       });
/       $('#education_completion_year').datepicker({
/         dateFormat : 'dd/mm/yy'
/       });
/       $('#experience_start_date').datepicker({
/         dateFormat : 'dd/mm/yy'
/       });
/       $('#experience_end_date').datepicker({
/         dateFormat : 'dd/mm/yy'
/       });

/     });
/     function employeeLogoUpload(event){
/       photo_url = event.fpfile.url
/       $('.profile-pic').html('');
/       $.ajax({
/        type: 'POST',
/        dataType: 'json',
/        url: "#{candidate_update_photo_path}",
/        data: { photo: photo_url,authenticity_token: window._token },
/        success: function (data) {
/         $('.text img').attr("src",photo_url);
/        }
/      });
/     }
/     function uploadResume(event){
/       resume_url = event.fpfile.url
/       $.ajax({
/        type: 'POST',
/        dataType: 'json',
/        url: "#{upload_resume_candidates_path}",
/        data: { resume: resume_url,authenticity_token: window._token },
/        // success: function (data) {
/        // }
/      });
/     }
/     $.datepicker.setDefaults({
/         changeYear: true,
/         yearRange: "1900:2017",
/         showMonthAfterYear: true,
/         showButtonPanel: true,
/         showAnim: "fold",
/         selectOtherMonths: true,
/         autoSize: true,
/         dateFormat: "yy-mm-dd"

/       });
/     $(".edit_in_line").css("display","none");
/     $('td').on('mouseover mouseout',function(){
/     $(this).find('.editprofile-pic_in_line').toggle();

/     });




